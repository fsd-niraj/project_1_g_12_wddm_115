<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Order Confirmation</title>
  <link rel="stylesheet" href="successAnimation.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <main>
    <div class="container">
      <div class="d-flex m-auto" style="height: 100vh;">
        <div class="row m-auto w-100">
          <h1 id="nameH1" class="text-center display-2 mb-3"></h1>
          <h2 class="text-center display-6 mb-2">Your Order has been placed successfully.</h2>
          <h3 id="addressDiv" class="text-center code"></h3>
          <div class="text-center my-4">
            <button class="btn btn-primary me-3" onclick="goBack()">Order more</button>
            <button class="btn btn-primary" onclick="goToExplore()">Exprole DineDrop</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="script.js"></script>
  <script>

    const urlParams = new URLSearchParams(window.location.search);
    const fname = urlParams.get('fname');
    const lname = urlParams.get('lname');
    const addrs = urlParams.get('address');
    const h1 = document.getElementById('nameH1');
    h1.textContent = `Congratulations ${fname + " " + lname.split('')[0]}!!`
    const addressDiv = document.getElementById('addressDiv')
    addrs !== "" ? addressDiv.textContent = `You can expect your order at ${addrs} in 30 min.` : ""
    function confetti() {
      var $confettiContainer = $('<div class="confetti"></div>');
      var colors = ["#3b5692", "#f9c70b", "#00abed", "#ea6747"];
      var height = 6.6;
      var width = 6.6;

      for (var i = 0; i < 100; i++) {
        var scale = Math.random() * 1.75 + 1;
        var $confettiItem = $(
          "<svg class='confetti-item' width='" +
          width * scale +
          "' height='" +
          height * scale +
          "' viewbox='0 0 " +
          width +
          " " +
          height +
          "'><use transform='rotate(" +
          Math.random() * 360 +
          ", " +
          width / 2 +
          ", " +
          height / 2 +
          ")' xlink:href='#svg-confetti' /></svg>"
        );
        $confettiItem.css({
          animation:
            Math.random() +
            2 +
            "s " +
            Math.random() * 2 +
            "s confetti-fall ease-in both",
          background: randomize(colors),
          left: Math.random() * 100 + "vw"
        });
        $confettiContainer.append($confettiItem);
      }
      $("body").append($confettiContainer);
    }

    function randomize(collection) {
      var randomNumber = Math.floor(Math.random() * collection.length);
      return collection[randomNumber];
    }

    $(document).ready(function () {
      confetti();
    });

    function goBack() {
      return window.history.go(-2);
    }

    function goToExplore(){
      return window.location="http://127.0.0.1:5500/index.html#cuisines";
    }

  </script>
</body>

</html>